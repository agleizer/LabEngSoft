<!DOCTYPE html>
<html lang="pt-br">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>Caminho Fácil – Rotas</title>

		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
		<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
		<link rel="stylesheet" href="assets/css/style.css" />

		<style>
			html,
			body {
				height: 100%;
				margin: 0;
			}
			#map {
				height: 400px;
				border-radius: 10px;
			}
		</style>
	</head>
	<body class="bg-light">
		<nav class="navbar navbar-dark bg-success fixed-top">
			<div class="container-fluid">
				<a class="navbar-brand" href="detalhes.html">← Voltar</a>
				<span class="navbar-text text-white">Traçar Rota</span>
			</div>
		</nav>

		<div class="container mt-5 pt-4">
			<form class="mb-4">
				<div class="mb-3">
					<label class="form-label">Origem</label>
					<input type="text" class="form-control" placeholder="Sua localização atual" />
				</div>
				<div class="mb-3">
					<label class="form-label">Destino</label>
					<input type="text" class="form-control" placeholder="Digite o destino" />
				</div>

				<div class="mb-3">
					<label class="form-label">Filtros de acessibilidade</label><br />
					<input type="checkbox" /> Adequada para cadeirantes<br />
					<input type="checkbox" /> Presença de piso tátil<br />
					<input type="checkbox" /> Calçadas largas
				</div>

				<div class="d-grid">
					<button type="button" class="btn btn-primary" onclick="gerarRota()">Gerar rota</button>
				</div>
			</form>

			<div id="map"></div>

			<div class="text-center mt-3">
				<button class="btn btn-success" onclick="location.href='relatorio.html'">Gerar Relatório da Região</button>
			</div>
		</div>

		<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
		<script>
			const map = L.map("map").setView([-23.561, -46.655], 14); // SP - região central
			L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
				attribution: "&copy; OpenStreetMap contributors",
				maxZoom: 19,
			}).addTo(map);

			let rota;

			function gerarRota() {
				if (rota) map.removeLayer(rota);

				const origem = [-23.561, -46.655];
				const destino = [-23.556, -46.662];

				const pontos = [origem, destino];
				rota = L.polyline(pontos, { color: "blue", weight: 4 }).addTo(map);
				map.fitBounds(rota.getBounds());

				L.marker(origem).addTo(map).bindPopup("Origem").openPopup();
				L.marker(destino).addTo(map).bindPopup("Destino");
			}
		</script>

		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
	</body>
</html>
